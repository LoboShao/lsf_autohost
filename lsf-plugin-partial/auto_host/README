README for LSF AUTO_HOST ML Plugin
IBM Platform LSF Version 10.1

=========================
CONTENTS
=========================
1. In this Directory
2. About This Plugin
3. Building and Installing the Plugin
4. Enabling the Plugin in LSF

=========================
1. In this Directory
=========================

README                this file.
Makefile              build instructions for the plugin
auto_host.c           source code for the ML-based AUTO_HOST plugin

=========================
2. About This Plugin
=========================

This plugin enables LSF to use machine learning for host selection via the AUTO_HOST extension and a RESTful ML inference service. Jobs can be submitted directly using bsub with the -ext "AUTO_HOST[]" option.

Example job submission:
bsub -n 3 -R "rusage[mem=222]" -R "type==any" -sim "runtime=60 cputime=50" -ext "AUTO_HOST[]" sleep 1000

For details on the ML service, see the lsf-ml-service README.

=========================
3. Building and Installing the Plugin
=========================

1. Clean previous builds (optional):
   make clean
   (If this is your first build, you can skip this step.)

2. Build the plugin:
   make

3. Copy the built plugin to the LSF lib directory:
   cp schmod_auto_host.so /opt/ibm/lsf/10.1/linux3.10-glibc2.17-x86_64/lib
   (The plugin should be built under /opt/ibm/lsf/10.1/misc/examples/)

=========================
4. Enabling the Plugin in LSF
=========================

1. Edit your LSF configuration (lsf.conf or lsb.modules) and add the following line:

   schmod_auto_host          ()           ()
 
2. Restart the LSF scheduler:
   badmin mbdrestart


allHosts = ls_gethostinfo(NULL, &totalHosts, NULL, 0, 0);


reward; throughput, number of jobs done in a time window

priorties: makespan > fairness >

lsf default host: r15s